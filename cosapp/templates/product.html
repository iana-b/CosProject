<div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3">
    <div class="card h-100 border border-light-subtle">
        <a href="{% url 'product_detail' product.id %}">
            <img src="{{ product.picture.url }}" class="card-img-top p-2" alt="" style="object-fit: contain; aspect-ratio: 1/1;">
        </a>
        <div class="card-body">
            <p class="card-subtitle mb-1"><a class="link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-25-hover text-body-secondary" href="{% url 'category' product.category.id %}">{{ product.category }}</a></p>
            <h5 class="card-title"><a href="{% url 'brand' product.brand.id %}" class="link-offset-2 link-underline link-underline-opacity-0 link-underline-opacity-25-hover text-body">{{ product.brand }}</a> {{ product.title }}</h5>
            {% with avg_rating=product.get_average_rating %}
                {% if avg_rating > 0 %}
                    <small>
                        <span>{{ product.get_hearts_display }}</span>
                        <span class="text-muted">({{ avg_rating|floatformat:1 }})</span>
                    </small>
                {% else %}
                    <small class="text-muted">Нет отзывов</small>
                {% endif %}
            {% endwith %}
            {% with min_price=product.get_minimal_price %}
                {% if min_price > 0 %}
                    <small>
                        <span class="text-muted">{{ min_price|floatformat:1 }}</span>
                    </small>
                {% endif %}
            {% endwith %}
        </div>
    </div>
</div>
